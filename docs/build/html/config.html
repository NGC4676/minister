
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Configuration &#8212; elderflower 0.3 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API reference" href="api.html" />
    <link rel="prev" title="Examples" href="example.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="configuration">
<h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<p>An example configuration file looks as follows:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># General</span>
<span class="nt">pixel_scale</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2.5</span>        <span class="c1"># arcsec/pix</span>
<span class="nt">r_scale</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">12</span>             <span class="c1"># pix</span>
<span class="nt">mag_limit</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">15</span>
<span class="nt">draw</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="nt">save</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="nt">ZP</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">~</span>
<span class="nt">pad</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">50</span>

<span class="c1"># crossmatch</span>
<span class="nt">mag_saturate</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">13.5</span>      <span class="c1"># estimate, not required to be accurate</span>
<span class="nt">use_PS1_DR2</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="nt">field_pad</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">50</span>

<span class="c1"># fitting</span>
<span class="nt">mag_threshold</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">13</span><span class="p p-Indicator">,</span><span class="nv">11</span><span class="p p-Indicator">]</span>  <span class="c1"># MB /VB</span>
<span class="nt">n_spline</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">cutoff</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="nt">n_cutoff</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="nt">theta_cutoff</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1200</span>

<span class="nt">theta_0</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="nt">fit_n0</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="nt">fit_sigma</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="nt">fit_frac</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="nt">leg2d</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>

<span class="c1"># mask</span>
<span class="nt">r_core</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">24</span>
<span class="nt">r_out</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">~</span>
<span class="nt">wid_strip</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">24</span>
<span class="nt">n_strip</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">48</span>
<span class="nt">mask_obj</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">~</span>

<span class="c1"># sampling</span>
<span class="nt">brightest_only</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="nt">draw_real</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="nt">parallel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="nt">n_cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="nt">nlive_init</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">~</span>
<span class="nt">sample_method</span><span class="p">:</span> <span class="s">&#39;auto&#39;</span>
<span class="nt">print_progress</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
</pre></div>
</div>
<section id="tips">
<h2>Tips<a class="headerlink" href="#tips" title="Permalink to this headline">¶</a></h2>
<p>To run <code class="docutils literal notranslate"><span class="pre">elderflower</span></code> we need some prior knowledge about the PSF and set the parameters properly.</p>
<p>A key assumption here is that the aureole follows a multi-power law. Be careful if the PSF presents a clear bump or non-neglibile artifacts – the parametric form may not has a good representation.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">r_scale</span></code> is the radius at which the intensity is measured as normalization. Make sure <code class="docutils literal notranslate"><span class="pre">r_scale</span></code> falls in the wing (outside the core and saturation). It is recommended to have <code class="docutils literal notranslate"><span class="pre">r_scale</span></code> to be small so that the S/N of intensity is high.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">theta_0</span></code> is the inner flattening radius of the aureole. This should be small to avoid biasing the inner parts. 5 arcsec is used because Dragonfly has large pixel size.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mag_threshold</span></code> sets the thresholds defining the MB and VB stars. For a fast mode, set them to be lower. Increase if the region lacks bright stars (but not higher than <cite>mag_limit</cite>). Note it is recommended to pick regions with a decent number of bright stars.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_spline</span></code> sets the number of components of the aureole. For a fast start-up, try <code class="docutils literal notranslate"><span class="pre">n_spline=2</span></code>. Increase if the residual suggests a higher complexity is needed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fit_n0=False</span></code> will fix the first component (n0) to be the value from profile fitting. This is usually set when n_spline&gt;=3 to 1) avoid local minimum from too many parameters, and 2)save time.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">use_PS1_DR2=True</span></code> will use the PAN-STARRS DR2 as the crossmatch. DR2 has a better performance in crossmatch in but the current MAST query approach using the PS1 API might result in HTTP Error in the case that the image is really large. Stars brighter than 7~8 mag may still be affected. A supplementary crossmatch with HLSP-ATLAS catalog improves (under implementation).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cutoff=True</span></code> applies a sharp cutoff (n_cutoff) beyond the outermost components (&gt; theta_cutoff). Often in actual data the scattered starlight does not extend to infinity because some scale of sky has been subtracted in the reduction step. Try this if the scattered light looks too extended.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">r_core</span></code> sets the mask aperture size for MB and/or VB stars because the cores are not well modelled. This can be a list: [VB, MB].</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">brightest_only=False</span></code> for a faster fitting on VB stars only. Sometimes useful when normalization for MB stars are not good.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">draw=False</span></code> to disable the redundant plots. They can be generated with the output.</p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">elderflower</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="example.html">Examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tips">Tips</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="example.html" title="previous chapter">Examples</a></li>
      <li>Next: <a href="api.html" title="next chapter">API reference</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Q. Liu.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/config.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>